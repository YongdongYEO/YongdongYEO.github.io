var prevActiveSection,activeSection,nextActiveSection,tmpActiveSection,num_rows=3;function loadMenubar(){$(".load-menubar").load("default.html #menubar",function(){var t=document.URL.split("/");t=t[t.length-1],$(".right-menu-menu a").each(function(){$(this).attr("href")===t&&$(this).addClass("this-page")}),$(".right-menu-dropmenu a").each(function(){$(this).attr("href")===t&&$(this).addClass("this-page")}),$(".right-menu-button").on("click",function(t){return t.preventDefault(),$(".right-menu-dropmenu").slideToggle(300),!1})})}function loadPostFooter(){$(".load-post-footer").load("default.html #post-footer")}function loadFooter(){$(".load-footer").load("default.html #footer",function(){lastUpdated(),$("._goto-top").on("click",function(t){return t.preventDefault(),$("html, body").stop().animate({scrollTop:0},600),!1})})}function loadPost(t){var e=t.attr("src");t.find(".load-post-title").load(e+" #post-title"),t.find(".load-post-publish").load(e+" #post-publish"),t.find(".load-post-keywords").load(e+" #post-keywords"),t.find(".load-post-abstract").load(e+" #post-abstract"),t.find(".post-link").attr("href",e),t.show()}function updateAge(){if(0<$(".update-birth").length){var t,e=new Date(Date.parse("1994 Sep 21 0:0:0 UTC")).getTime();setInterval(function(){t=new Number(new Date((new Date).getTime()-e)/315576e5).toFixed(10),$(".update-birth p").text(t)},100)}}function date_mmmddyyHHMM(t){var e=t.getDate(),n=t.getMonth()+1,i=t.getFullYear(),a=t.getHours(),o=t.getMinutes();return(1==n?"Jan":2==n?"Feb":3==n?"Mar":4==n?"Apr":5==n?"May":6==n?"Jun":7==n?"Jul":8==n?"Aug":9==n?"Sep":10==n?"Oct":11==n?"Nov":"Dec")+" "+(e<10?"0"+e:e)+", "+i+" at "+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)}function lastUpdated(){if($(".update-time").length){var t,e="Unknown";0!=(t=Date.parse(document.lastModified))&&(e=""+date_mmmddyyHHMM(new Date(t))),$(".update-time").text("Last updated on "+e)}$(".current-version").length&&$(".current-version").text("Ver."+versionUpdate)}function applyClickEvent(){$("._see-more").on("click",function(t){return t.preventDefault(),$("html, body").stop().animate({scrollTop:$("._contents").offset().top},600),!1}),$("._nav-bar ._toggle").on("click",function(t){return t.preventDefault(),$("._nav-bar ._nav-menu").is(":visible")?($("._nav-bar ._toggle").text($("._nav-bar ._nav-menu ._active").text()),$("._nav-bar ._toggle").css("opacity","1"),$("._nav-bar ._toggle2").css("opacity","1")):($("._nav-bar ._toggle").css("opacity","0"),$("._nav-bar ._toggle2").css("opacity","0")),$("._nav-bar ._nav-menu").slideToggle(400),!1}),$("._nav-bar ._nav-menu li").on("click",function(t){return t.preventDefault(),0<$.attr(this,"class").split(" ")[0].length&&$("html, body").stop().animate({scrollTop:$('._track[id="'+$.attr(this,"class").split(" ")[0]+'"]').offset().top},600),!1}),$(".section-up").on("click",function(t){-50<$('._track[id="'+tmpActiveSection+'"]').offset().top-$(window).scrollTop()?(prevActiveSection=$("._track").attr("id"),tmpActiveSection=$("._track").attr("id"),$("._track").each(function(){if(prevActiveSection=tmpActiveSection,(tmpActiveSection=$(this).attr("id"))===activeSection)return!1})):prevActiveSection=activeSection,$("html, body").stop().animate({scrollTop:$('._track[id="'+prevActiveSection+'"]').offset().top},600)}),$(".section-down").on("click",function(t){tmpActiveSection=$("._track").attr("id"),nextActiveSection=$("._track").attr("id"),$("._track").each(function(){if(tmpActiveSection=nextActiveSection,nextActiveSection=$(this).attr("id"),tmpActiveSection===activeSection)return!1}),$("html, body").stop().animate({scrollTop:$('._track[id="'+nextActiveSection+'"]').offset().top},600)}),$(".section-top").on("click",function(t){return t.preventDefault(),$("html, body").stop().animate({scrollTop:0},600),!1})}function updateTmpActiveSection(){tmpActiveSection=$("._track").attr("id"),$("._track").each(function(){$(this).offset().top-$(window).scrollTop()<120&&(tmpActiveSection=$(this).attr("id"))})}function scrollSpy(){updateTmpActiveSection(),activeSection!==tmpActiveSection&&"header"!==tmpActiveSection&&"footer"!==tmpActiveSection&&($("._nav-bar ._nav-menu").length&&($("._nav-bar ._nav-menu ."+activeSection).removeClass("_active"),$("._nav-bar ._nav-menu ."+tmpActiveSection).addClass("_active")),$("._nav-bar ._toggle").length&&$("._nav-bar ._toggle").text($("._nav-bar ._nav-menu ._active").text()),activeSection=tmpActiveSection),$(window).scrollTop()+65<$("header").height()?($("._nav-bar").addClass("_nav-bar-collapse"),$("._nav-bar").removeClass("_nav-bar-fix"),$("._nav-bar").removeClass("_nav-bar-collapse2")):$(window).scrollTop()+15+$("._nav-bar").height()-10>$(document).height()-$("footer").height()?($("._nav-bar").addClass("_nav-bar-collapse2"),$("._nav-bar").removeClass("_nav-bar-fix"),$("._nav-bar").removeClass("_nav-bar-collapse")):($("._nav-bar").addClass("_nav-bar-fix"),$("._nav-bar").removeClass("_nav-bar-collapse"),$("._nav-bar").removeClass("_nav-bar-collapse2"))}function mobile(){$(window).width()<1e3&&$("._nav-bar ._nav-menu").length?($("._nav-bar ._toggle").text($("._nav-bar ._nav-menu ._active").text()),$("._nav-bar ._toggle").css("opacity","1"),$("._nav-bar ._toggle2").css("opacity","1"),$("._nav-bar ._nav-menu").hide()):$("._nav-bar ._nav-menu").length&&(activeSection=$("._contents ._track").attr("id"),$("._nav-bar ._nav-menu ."+activeSection).addClass("_active"))}function resizeHeightNavigation(){var t=0;$("._nav-bar ._nav-menu li").each(function(){t++});var e=($(window).height()-130)/t;$("._nav-bar ._nav-menu li").each(function(){$(this).css({height:e+"px","line-height":e+"px"})})}function heightNavigation(){var t=$(window).height();$(".tall-header").each(function(){$(this).css({"min-height":t+"px"})})}function initializePostLists(){$(".load-slice-posts").each(function(){refreshPostsList($(this),0,Math.floor(($(this).children("ul").children("li").length-1)/num_rows)+1)}),$(".load-all-posts").each(function(){$(this).each(function(){$(this).children("li").each(function(){loadPost($(this))})}),refreshPostsList($(this),0,Math.floor(($(this).children("ul").children("li").length-1)/num_rows)+1)}),$(".load-recent-posts").each(function(){$(this).load("/all-posts.html #all-posts > ul > li:lt(3)",function(){$(this).find("li").each(function(){loadPost($(this))})})})}function listPostsClickEvents(){$(".load-slice-posts").each(function(){var t=$(this).children("div").children(".number").text().split("/")[0]-1,e=$(this).children("div").children(".number").text().split("/")[1]-0;$(this).children("div").children(".first").on("click",function(){t=0,refreshPostsList($(this).parent().parent(),t,e)}),$(this).children("div").children(".last").on("click",function(){t=e-1,refreshPostsList($(this).parent().parent(),t,e)}),$(this).children("div").children(".prev").on("click",function(){if(0===t)return!1;t--,refreshPostsList($(this).parent().parent(),t,e)}),$(this).children("div").children(".next").on("click",function(){if(t===e-1)return!1;t++,refreshPostsList($(this).parent().parent(),t,e)})})}function refreshPostsList(t,e,n){var i=0;t.children("ul").children("li").each(function(){i<(e+1)*num_rows&&e*num_rows<=i?($(this).css("border-top","1pt dashed rgba(200,200,200,0.8)"),i!==e*num_rows||$(this).parents().hasClass("grid-3-1-ul")||$(this).css("border-top","none"),loadPost($(this)),$(this).show()):$(this).hide(),i++}),t.children("div").children(".number").text(e+1+"/"+n)}function loadHeader(){$(".load-header").each(function(){$(this).load($(this).attr("src")+" #header",function(){$(this).find(".tall-header").css({height:"150px",position:"absolute",bottom:"0"}),$(this).find("._profile").children("p").hide(),$(this).find("._profile").css({position:"absolute",bottom:"30px","padding-bottom":"0px"})})})}$(document).ready(function(){loadMenubar(),loadFooter(),loadHeader(),loadPostFooter(),updateAge(),initializePostLists(),listPostsClickEvents(),applyClickEvent(),mobile(),heightNavigation(),resizeHeightNavigation(),$(window).on("scroll",function(){scrollSpy()}),$(window).on("resize",function(){resizeHeightNavigation(),scrollSpy(),$(".right-menu-dropmenu").hide()}),$(window).load(function(){$("html").css("display","block"),scrollSpy(),lastUpdated()})});